const loginLink=document.querySelector(`.login-link`),popup=document.querySelector(`.modal-login`),login=popup.querySelector(`#user-login`),password=popup.querySelector(`#user-password`),loginForm=popup.querySelector(`.login-form`);let isStorageSupport=!0;const storage=``;try{storage=localStorage.getItem(`login`)}catch(a){isStorageSupport=!1}const openPopup=a=>{a.preventDefault(),popup.classList.add(`modal-show`),storage?(login.value=storage,password.focus()):login.focus()};loginLink.addEventListener(`click`,openPopup);const modalClose=popup.querySelector(`.modal-close`),closePopup=a=>{a.preventDefault(),popup.classList.remove(`modal-show`),popup.classList.remove(`modal-error`)};modalClose.addEventListener(`click`,closePopup),loginForm.addEventListener(`submit`,a=>{login.value&&password.value?isStorageSupport&&localStorage.setItem(`login`,login.value):(a.preventDefault(),popup.classList.remove(`modal-error`),popup.offsetWidth=popup.offsetWidth,popup.classList.add(`modal-error`))});const mapLink=document.querySelector(`.contacts-button-map`),map=document.querySelector(`.modal-map`),mapCloseButton=map.querySelector(`.modal-close`),openMap=a=>{a.preventDefault(),map.classList.add(`modal-show`)};mapLink.addEventListener(`click`,openMap);const closeMap=a=>{a.preventDefault(),map.classList.remove(`modal-show`)};mapCloseButton.addEventListener(`click`,closeMap),window.addEventListener(`keydown`,a=>{27===a.keyCode&&(a.preventDefault(),closePopup(a),closeMap(a))});
